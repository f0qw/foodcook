# FoodCook 项目总结

## 项目概述

FoodCook 是一个现代化的家庭菜单管理系统，帮助用户管理家庭菜品、记录用餐体验、管理食材库存。项目采用前后端分离架构，提供完整的用户权限管理和数据管理功能。

## 核心功能

### 🍽️ 菜品管理
- 菜品的增删改查操作
- 支持图片上传和制作链接
- 菜品分类管理
- 菜品与食材的关联管理

### 🥬 食材管理
- 食材的增删改查操作
- 价格和单位管理
- 与菜品的多对多关联

### 📝 用餐记录
- 创建和查看用餐记录
- 支持添加用餐感想和图片
- 瀑布流展示历史记录

### 🛒 购物车功能
- 将菜品加入购物车
- 批量创建用餐记录
- 实时计算总价

### 👤 用户系统
- 用户注册和登录
- JWT 认证
- 角色权限管理（Root用户/普通用户）

## 技术架构

### 后端技术栈
- **语言**: Go 1.24+
- **框架**: Gin (HTTP框架)
- **ORM**: GORM (数据库操作)
- **数据库**: MySQL 8.0+
- **缓存**: Redis
- **认证**: JWT
- **日志**: Logrus

### 前端技术栈
- **框架**: Vue 3 + TypeScript
- **UI库**: Element Plus
- **状态管理**: Pinia
- **构建工具**: Vite
- **路由**: Vue Router

### 项目结构
```
foodcook/
├── cmd/foodcook/main.go          # 应用入口
├── internal/                     # 后端代码
│   ├── app/                      # 应用层 (handlers, routes)
│   ├── domain/                   # 领域层 (models, interfaces)
│   └── infrastructure/           # 基础设施层 (repositories)
├── web/                          # 前端代码
├── configs/                      # 配置文件
├── scripts/                      # 脚本文件
└── docs/                         # 文档
```

## 数据库设计

### 核心表结构
- **users**: 用户表
- **dishes**: 菜品表
- **ingredients**: 食材表
- **dish_ingredients**: 菜品食材关联表
- **meal_records**: 用餐记录表
- **meal_record_dishes**: 用餐记录菜品关联表
- **categories**: 菜品分类表

### 关键关系
- 菜品与食材：多对多关系
- 用户与用餐记录：一对多关系
- 用餐记录与菜品：多对多关系

## 权限控制

### 用户角色
- **Root用户**: 拥有所有权限，可以管理菜品和食材
- **普通用户**: 可以查看菜品、创建用餐记录
- **未登录用户**: 只能查看首页

### 权限验证
- 使用中间件进行权限验证
- JWT Token 认证
- 基于角色的访问控制

## 开发历程

### 主要里程碑
1. **基础架构搭建**: 建立前后端分离架构
2. **数据库设计**: 设计核心数据模型和关系
3. **用户系统**: 实现用户注册、登录和权限管理
4. **菜品管理**: 实现菜品的完整CRUD操作
5. **食材管理**: 实现食材管理和与菜品的关联
6. **用餐记录**: 实现用餐记录的创建和管理
7. **购物车功能**: 添加购物车和批量创建功能
8. **权限控制**: 实现基于角色的权限管理
9. **数据验证**: 添加删除时的关联检查
10. **文档完善**: 整理项目文档和启动脚本

### 技术挑战与解决方案
1. **数据库关联**: 使用GORM处理复杂的多对多关系
2. **权限控制**: 实现中间件进行统一的权限验证
3. **前后端联调**: 解决CORS和跨域问题
4. **数据一致性**: 使用事务确保数据操作的原子性
5. **用户体验**: 实现购物车和瀑布流展示

## 部署方案

### 开发环境
- 一键启动脚本 (`start.sh`)
- 自动检查和启动依赖服务
- 热重载开发服务器

### 生产环境
- Docker 容器化部署
- Nginx 反向代理
- systemd 进程管理
- 数据库备份和监控

## 项目特色

1. **现代化架构**: 采用前后端分离，使用最新的技术栈
2. **完整功能**: 涵盖菜品、食材、用餐记录的完整管理流程
3. **权限控制**: 细粒度的角色权限管理
4. **用户体验**: 购物车、瀑布流等现代化交互设计
5. **数据安全**: 完善的关联检查和数据验证
6. **易于部署**: 提供多种部署方案和自动化脚本

## 未来规划

1. **移动端适配**: 开发移动端应用
2. **数据分析**: 添加用餐数据统计和分析功能
3. **社交功能**: 添加菜品分享和评论功能
4. **智能推荐**: 基于历史数据的菜品推荐
5. **多语言支持**: 支持多语言界面 